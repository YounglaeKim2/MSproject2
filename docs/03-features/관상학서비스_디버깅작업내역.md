# ê´€ìƒí•™ ì„œë¹„ìŠ¤ ë””ë²„ê¹… ì‘ì—… ë‚´ì—­ (2025-07-30)

> **ì‘ì—… ê°œìš”**: Dockerë¥¼ ì´ìš©í•œ ê´€ìƒí•™ ì„œë¹„ìŠ¤ ì™„ì „ êµ¬ì¶• ë° ì˜¤ë¥˜ í•´ê²°  
> **ìµœì¢… ìƒíƒœ**: ğŸ­ í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ ëª¨ë‘ ì‘ë™, AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜ë§Œ ë‚¨ìŒ  
> **ë‹¤ìŒ ì‘ì—…**: ì¬ë¶€íŒ… í›„ ìµœì¢… AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜ í•´ê²°

---

## ğŸ† ì™„ë£Œëœ ì£¼ìš” ì„±ê³¼

### âœ… 1. Docker Composeë¡œ ê´€ìƒí•™ ì„œë¹„ìŠ¤ ì™„ì „ êµ¬ì¶•
- **ì´ì „**: ìˆ˜ë™ ì„¤ì¹˜ë¡œ 1ì‹œê°„+ ëŒ€ê¸° â†’ ì‹¤íŒ¨
- **í˜„ì¬**: Dockerë¡œ 10ë¶„ ë§Œì— ì™„ì „ êµ¬ì¶• ì„±ê³µ!
- **êµ¬ì„±**: ë°±ì—”ë“œ(8001) + í”„ë¡ íŠ¸ì—”ë“œ(3001) + PostgreSQL DB(5433)

### âœ… 2. ëª¨ë“  ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°
```bash
# ìµœì¢… requirements.txt êµ¬ì„±
opencv-python
mediapipe
numpy
fastapi
uvicorn
python-multipart
SQLAlchemy
google-generativeai
psycopg2-binary
langchain
langchain-community
langchain-google-genai
faiss-cpu
sentence-transformers  # â† ì•„ì§ ì„¤ì¹˜ ì§„í–‰ ì¤‘
```

### âœ… 3. í”„ë¡ íŠ¸ì—”ë“œ API ì—°ê²° ë¬¸ì œ í•´ê²°
```typescript
// ìˆ˜ì • ì „: ìƒëŒ€ ê²½ë¡œ (404 ì—ëŸ¬)
const response = await axios.post('/analyze/', formData)

// ìˆ˜ì • í›„: ì ˆëŒ€ ê²½ë¡œ (ì„±ê³µ)
const response = await axios.post('http://localhost:8001/analyze/', formData)
```

### âœ… 4. ë°±ì—”ë“œ íŒŒì¼ ê²½ë¡œ ë¬¸ì œ í•´ê²°
```python
# ìˆ˜ì • ì „: ë„ì»¤ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŒ
kb_file_path = "../ê´€ìƒë¡œì§.txt"

# ìˆ˜ì • í›„: ë„ì»¤ ë‚´ë¶€ ì ˆëŒ€ ê²½ë¡œ
kb_file_path = "/app/ê´€ìƒë¡œì§.txt"
```

### âœ… 5. Google API í‚¤ í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```yaml
# docker-compose.yml
environment:
  - GOOGLE_API_KEY=AIzaSyD7OB3MnPASwL6oN7_Ni8hKyPWOEACYeIo
  - GEMINI_MODEL=gemini-2.5-flash
```

---

## ğŸ”§ í˜„ì¬ í•´ê²°í•´ì•¼ í•  ë§ˆì§€ë§‰ ë¬¸ì œ

### â“ AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜
**ì¦ìƒ**: "ë‹µë³€ ìƒì„± ì‹œìŠ¤í…œì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”."

**ì›ì¸ ë¶„ì„**:
1. `sentence-transformers` íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë¯¸ì™„ë£Œ (CUDA ê´€ë ¨ ëŒ€ìš©ëŸ‰ íŒ¨í‚¤ì§€)
2. RAG íŒŒì´í”„ë¼ì¸ ì´ˆê¸°í™” ì‹¤íŒ¨
3. Fallback ë¡œì§ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ì ìš©í•œ ì„ì‹œ í•´ê²°ì±…**:
```python
# report_generator.pyì— fallback ë¡œì§ ì¶”ê°€
if QA_CHAIN is not None:
    # RAG ì‚¬ìš©
    result = QA_CHAIN.invoke({"query": prompt})
else:
    # ì§ì ‘ Google Gemini API ì‚¬ìš©
    llm = GoogleGenerativeAI(google_api_key=google_api_key, ...)
    comprehensive_report = llm.invoke(prompt)
```

**ìƒì„¸ ì—ëŸ¬ ë¡œê¹… ì¶”ê°€**:
```python
except Exception as e:
    import traceback
    error_trace = traceback.format_exc()
    print(f"ERROR in generate_report: {e}")
    print(f"TRACEBACK: {error_trace}")
```

---

## ğŸš€ ì¬ë¶€íŒ… í›„ ë³µêµ¬ ìˆœì„œ

### 1ë‹¨ê³„: ì„œë¹„ìŠ¤ ì¬ì‹œì‘
```bash
cd C:\workspace\MSproject2_SAJU\Physiognomy
docker-compose up -d
```

### 2ë‹¨ê³„: ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
```bash
# ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps

# ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸
docker-compose logs physiognomy-backend --tail=10
```

### 3ë‹¨ê³„: ì ‘ì† í…ŒìŠ¤íŠ¸
- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:3001
- ë°±ì—”ë“œ API: http://localhost:8001/docs

### 4ë‹¨ê³„: AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜ ìµœì¢… í•´ê²°
```bash
# ì´ë¯¸ì§€ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸ í›„ ìƒì„¸ ì—ëŸ¬ ë¡œê·¸ í™•ì¸
docker-compose logs physiognomy-backend --since=30s
```

---

## ğŸ“Š ì „ì²´ MSProject2 ì„œë¹„ìŠ¤ í˜„í™©

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ìƒíƒœ | ê¸°ëŠ¥ |
|--------|------|------|------|
| Main App | 4000 | âœ… ì™„ì„± | í†µí•© ëœë”© í˜ì´ì§€ |
| SAJU Backend | 8000 | âœ… ì™„ì„± | 37ê°œ ë¶„ì„ ë©”ì„œë“œ |
| SAJU Frontend | 3000 | âœ… ì™„ì„± | ì‚¬ì£¼+ëŒ€ìš´+ì„¸ìš´+AIì±„íŒ… |
| Compatibility Backend | 8002 | âœ… ì™„ì„± | ê¶í•© ë¶„ì„ API |
| Compatibility Frontend | 3002 | âœ… ì™„ì„± | ê¶í•© ë¶„ì„ UI |
| **Physiognomy Backend** | **8001** | **ğŸ”„ 99%** | **AI ê´€ìƒ ë¶„ì„ API** |
| **Physiognomy Frontend** | **3001** | **ğŸ”„ 99%** | **ê´€ìƒ ë¶„ì„ UI** |

---

## ğŸ¯ ìµœì¢… ëª©í‘œ

**ì™„ì„± ì„ë°•**: AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜ë§Œ í•´ê²°í•˜ë©´ 4ê°œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì™„ì „ì²´ ë‹¬ì„±!

### ì˜ˆìƒ í•´ê²° ë°©ë²•
1. **sentence-transformers ì™„ì „ ì„¤ì¹˜ ëŒ€ê¸°**
2. **ë˜ëŠ” RAG ì—†ì´ ì§ì ‘ Gemini API ì‚¬ìš©ìœ¼ë¡œ ìš°íšŒ**
3. **ì—ëŸ¬ ë¡œê·¸ ë¶„ì„ í›„ ì •í™•í•œ ì›ì¸ íŒŒì•…**

---

## ğŸ“‹ ì¤‘ìš” íŒŒì¼ ìœ„ì¹˜

### í•µì‹¬ ì„¤ì • íŒŒì¼
- `Physiognomy/docker-compose.yml` - Docker ì„œë¹„ìŠ¤ êµ¬ì„±
- `Physiognomy/backend/requirements.txt` - Python ì˜ì¡´ì„±
- `Physiognomy/frontend/src/App.tsx` - API ì—°ê²° ì„¤ì •

### ì£¼ìš” ì†ŒìŠ¤ ì½”ë“œ
- `Physiognomy/backend/app/main.py` - FastAPI ë©”ì¸
- `Physiognomy/backend/app/services/report_generator.py` - AI ë‹µë³€ ìƒì„± (ë¬¸ì œ ì§€ì )
- `Physiognomy/ê´€ìƒë¡œì§.txt` - ì§€ì‹ ë² ì´ìŠ¤

### í™˜ê²½ ì„¤ì •
- `Physiognomy/.env` - í™˜ê²½ë³€ìˆ˜
- Google API Key: `AIzaSyD7OB3MnPASwL6oN7_Ni8hKyPWOEACYeIo`

---

**ğŸ”¥ ì¬ë¶€íŒ… í›„ ìµœìš°ì„  ì‘ì—…**: AI ë‹µë³€ ìƒì„± ì˜¤ë¥˜ ìµœì¢… í•´ê²°ë¡œ 4ê°œ ì„œë¹„ìŠ¤ ì™„ì „ì²´ ë‹¬ì„±! ğŸ†**

**ğŸ“ ì‘ì„±ì™„ë£Œ**: 2025-07-30 (ì¬ë¶€íŒ… ì „ ë°±ì—… ì™„ë£Œ)**