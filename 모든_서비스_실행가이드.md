# 🚀 MSProject2 모든 서비스 실행 가이드

> 2025-08-03 최종 업데이트  
> 모든 서비스 실행/정지 방법 완전 정리

## 🎯 서비스 개요

MSProject2는 **4개의 독립 서비스**로 구성된 완전 분리형 마이크로서비스 플랫폼입니다.

| 서비스 | 포트 | 상태 | 설명 |
|--------|------|------|------|
| **메인 앱** | 4000 | ✅ 완성 | 랜딩 페이지 + 통합 네비게이션 |
| **SAJU 웹** | 3000 | ✅ 완성 | 웹 사주 분석 서비스 |
| **SAJU API** | 8000 | ✅ 완성 | 사주 분석 백엔드 API |
| **AppService 모바일** | 8082 | ✅ 완성 | React Native 모바일 앱 |

---

## 📁 디렉토리 구조

```
C:\workspace\MSproject2\
├── main-app/                    # 메인 랜딩 페이지 (포트 4000)
├── SAJU/
│   ├── frontend/               # SAJU 웹 서비스 (포트 3000)
│   └── backend/                # SAJU API 서버 (포트 8000)
└── AppService/
    └── FortuneApp/             # React Native 모바일 앱 (포트 8082)
```

---

## 🚀 서비스별 실행 방법

### **1. SAJU API 백엔드 서버 (포트 8000)**

#### 실행
```bash
# 방법 1: 직접 실행
cd C:\workspace\MSproject2\SAJU\backend
uvicorn app.main:app --reload --port 8000

# 방법 2: 배치 파일 실행  
C:\workspace\MSproject2\start_saju_server.bat
```

#### 확인
- 브라우저: http://localhost:8000/health
- API 문서: http://localhost:8000/docs
- 예상 응답: `{"status": "healthy", "message": "SAJU API is running"}`

#### 정지
- `Ctrl + C` (터미널에서)
- 또는 터미널 창 닫기

---

### **2. SAJU 웹 프론트엔드 (포트 3000)**

#### 실행
```bash
# 직접 실행
cd C:\workspace\MSproject2\SAJU\frontend
npm start

# 또는 특정 포트 지정
PORT=3000 npm start
```

#### 확인
- 브라우저: http://localhost:3000
- React 앱 로딩 확인

#### 정지
- `Ctrl + C` (터미널에서)
- 또는 터미널 창 닫기

---

### **3. 메인 앱 (포트 4000)**

#### 실행
```bash
# 직접 실행
cd C:\workspace\MSproject2\main-app
npm start

# Vite 개발 서버 시작됨
```

#### 확인
- 브라우저: http://localhost:4000
- 메인 랜딩 페이지 표시

#### 정지
- `Ctrl + C` (터미널에서)

---

### **4. AppService 모바일 앱 (포트 8082)**

#### 실행
```bash
# 직접 실행
cd C:\workspace\MSproject2\AppService\FortuneApp
npx expo start --port 8082

# 터널 모드 (핸드폰 연결 문제 시)
npx expo start --tunnel

# 웹 브라우저 테스트
npx expo start --web
```

#### 확인
- **모바일**: QR 코드 스캔 → Expo Go 앱에서 실행
- **웹**: http://localhost:8082 (웹 모드 시)
- 터미널에서 "Metro waiting on..." 메시지 확인

#### 정지
- `Ctrl + C` (터미널에서)

---

## ⚡ 전체 서비스 일괄 실행

### **방법 1: 수동 순차 실행 (권장)**
```bash
# 1단계: SAJU API 백엔드 먼저 실행
cd C:\workspace\MSproject2\SAJU\backend
uvicorn app.main:app --reload --port 8000

# 새 터미널에서 2단계: SAJU 웹 프론트엔드
cd C:\workspace\MSproject2\SAJU\frontend  
npm start

# 새 터미널에서 3단계: 메인 앱
cd C:\workspace\MSproject2\main-app
npm start

# 새 터미널에서 4단계: 모바일 앱 (선택사항)
cd C:\workspace\MSproject2\AppService\FortuneApp
npx expo start --tunnel
```

### **방법 2: 배치 파일 사용**
```bash
# 사주 서비스만 실행
C:\workspace\MSproject2\start_all_servers.bat

# 개별 서비스 실행  
C:\workspace\MSproject2\start_saju_server.bat
```

---

## 🛑 서비스별 정지 방법

### **일반적인 정지 방법**
```bash
# 모든 Node.js/Python 서비스 공통
Ctrl + C (터미널에서)

# 터미널 창 닫기
Alt + F4 또는 창 닫기 버튼
```

### **강제 정지 (포트 충돌 시)**

#### Windows 명령어
```bash
# 특정 포트 사용 프로세스 확인
netstat -ano | findstr :8000
netstat -ano | findstr :3000  
netstat -ano | findstr :4000
netstat -ano | findstr :8082

# 프로세스 강제 종료 (PID 확인 후)
taskkill /PID [PID번호] /F

# 예시: 포트 8000 사용 프로세스 모두 종료
for /f "tokens=5" %a in ('netstat -aon ^| findstr :8000') do taskkill /f /pid %a
```

#### 포트별 강제 정지
```bash
# SAJU API (포트 8000)
for /f "tokens=5" %a in ('netstat -aon ^| findstr :8000') do taskkill /f /pid %a

# SAJU 웹 (포트 3000)  
for /f "tokens=5" %a in ('netstat -aon ^| findstr :3000') do taskkill /f /pid %a

# 메인 앱 (포트 4000)
for /f "tokens=5" %a in ('netstat -aon ^| findstr :4000') do taskkill /f /pid %a

# 모바일 앱 (포트 8082)
for /f "tokens=5" %a in ('netstat -aon ^| findstr :8082') do taskkill /f /pid %a
```

---

## 🔧 문제 해결 가이드

### **포트 충돌 문제**
```bash
# 문제: "Port already in use" 오류
# 해결: 다른 포트 사용 또는 기존 프로세스 종료

# SAJU API 다른 포트로 실행
uvicorn app.main:app --reload --port 8001

# SAJU 웹 다른 포트로 실행  
PORT=3001 npm start

# 모바일 앱 다른 포트로 실행
npx expo start --port 8083
```

### **모듈 없음 오류**
```bash
# Node.js 프로젝트
npm install

# Python 프로젝트  
pip install -r requirements.txt
```

### **캐시 문제**
```bash
# Node.js 캐시 클리어
npm cache clean --force
rm -rf node_modules
npm install

# Expo 캐시 클리어
npx expo start --clear
```

---

## 📊 서비스 상태 확인 방법

### **헬스 체크 URL**
```bash
# SAJU API 백엔드
http://localhost:8000/health
http://localhost:8000/docs (API 문서)

# SAJU 웹 프론트엔드  
http://localhost:3000

# 메인 앱
http://localhost:4000

# 모바일 앱 (웹 모드)
http://localhost:8082
```

### **로그 확인**
```bash
# 각 터미널에서 실시간 로그 모니터링
# 오류 발생 시 해당 터미널의 오류 메시지 확인

# API 호출 로그 (SAJU 백엔드)
tail -f C:\workspace\MSproject2\SAJU\backend\server.log
```

---

## 🎯 권장 개발 순서

### **기본 개발/테스트**
```
1. SAJU API 백엔드 실행 (포트 8000)
2. SAJU 웹 프론트엔드 실행 (포트 3000)  
3. 기본 사주 분석 기능 테스트
4. 필요시 메인 앱 실행 (포트 4000)
```

### **모바일 앱 개발/테스트**
```
1. SAJU API 백엔드 실행 (포트 8000) - 필수
2. AppService 모바일 앱 실행 (포트 8082)
3. 모바일에서 API 연동 테스트
```

### **전체 통합 테스트**
```
1. 모든 서비스 실행 (4개)
2. 각 서비스 간 연동 확인
3. 크로스플랫폼 동작 테스트
```

---

## 📱 모바일 앱 특별 안내

### **Expo 모바일 앱 실행**
```bash
# 가장 안정적인 방법 (권장)
cd C:\workspace\MSproject2\AppService\FortuneApp
npx expo start --tunnel

# QR 코드가 나타나면:
# - iPhone: 카메라로 QR 코드 스캔 → "Expo Go에서 열기"  
# - Android: Expo Go 앱 → "Scan QR Code"
```

### **필수 준비사항**
- **Expo Go 앱 설치**: 
  - iPhone: App Store에서 "Expo Go" 검색
  - Android: Google Play에서 "Expo Go" 검색
- **같은 Wi-Fi 네트워크**: PC와 핸드폰 동일 네트워크 연결
- **방화벽 설정**: Windows Defender 방화벽 임시 해제 (테스트용)

---

## 🔄 자동화 스크립트

### **시작 스크립트 생성**
```batch
# start_all.bat 파일 생성
@echo off
echo Starting MSProject2 Services...

start "SAJU API" cmd /k "cd /d C:\workspace\MSproject2\SAJU\backend && uvicorn app.main:app --reload --port 8000"
timeout /t 5
start "SAJU Web" cmd /k "cd /d C:\workspace\MSproject2\SAJU\frontend && npm start"  
timeout /t 5
start "Main App" cmd /k "cd /d C:\workspace\MSproject2\main-app && npm start"

echo All services started!
pause
```

### **정지 스크립트 생성**
```batch
# stop_all.bat 파일 생성
@echo off
echo Stopping MSProject2 Services...

for /f "tokens=5" %%a in ('netstat -aon ^| findstr :8000') do taskkill /f /pid %%a
for /f "tokens=5" %%a in ('netstat -aon ^| findstr :3000') do taskkill /f /pid %%a  
for /f "tokens=5" %%a in ('netstat -aon ^| findstr :4000') do taskkill /f /pid %%a
for /f "tokens=5" %%a in ('netstat -aon ^| findstr :8082') do taskkill /f /pid %%a

echo All services stopped!
pause
```

---

## ✅ 빠른 체크리스트

### **서비스 시작 전 확인**
- [ ] Node.js 18+ 설치 확인
- [ ] Python 3.8+ 설치 확인  
- [ ] npm/pip 의존성 설치 완료
- [ ] 포트 충돌 없음 확인

### **정상 동작 확인**
- [ ] SAJU API: http://localhost:8000/health 응답 확인
- [ ] SAJU 웹: http://localhost:3000 로딩 확인
- [ ] 메인 앱: http://localhost:4000 표시 확인
- [ ] 모바일 앱: QR 코드 스캔 후 앱 실행 확인

### **문제 발생 시**
- [ ] 터미널 오류 메시지 확인
- [ ] 포트 충돌 검사 및 해결
- [ ] 의존성 재설치
- [ ] 캐시 클리어 후 재시작

---

## 🎊 성공적인 실행 예시

### **모든 서비스 정상 실행 시**
```
✅ SAJU API (8000): {"status": "healthy"}
✅ SAJU 웹 (3000): React App 로딩 완료
✅ 메인 앱 (4000): Vite 개발 서버 시작
✅ 모바일 앱 (8082): Expo QR 코드 표시

🎉 MSProject2 모든 서비스 정상 동작!
```

---

**이제 언제든지 이 가이드를 참고하여 MSProject2의 모든 서비스를 쉽게 실행하고 관리할 수 있습니다!** 🚀