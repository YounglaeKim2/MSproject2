# 📱 AppService 테스트 가이드

> 2025-08-03 작성  
> Phase 1-3 완료 후 전체 기능 테스트 방법

## 🎯 테스트 개요

### 테스트 목표
- **Phase 1-3 모든 기능** 정상 작동 확인
- **API 연동** 완전성 검증  
- **사용자 경험** 플로우 테스트
- **에러 처리** 견고성 확인

---

## 🚀 테스트 환경 설정

### 1. 백엔드 서버 실행
```bash
# SAJU 백엔드 시작
cd C:\workspace\MSproject2\SAJU\backend
uvicorn app.main:app --reload --port 8000

# 확인: http://localhost:8000/health
```

### 2. 모바일 앱 실행
```bash
# AppService 시작
cd C:\workspace\MSproject2\AppService\FortuneApp
npx expo start

# QR 코드 스캔하여 모바일에서 실행
# 또는 웹 브라우저에서 테스트
```

### 3. 테스트 준비 데이터
```json
{
  "생년월일": "1990-05-15",
  "시간": "14",
  "성별": "남자",
  "이름": "홍길동"
}
```

---

## 📋 단계별 테스트 시나리오

### **Phase 1: API 연동 기반 테스트**

#### 1.1 API 연결 테스트
```
1. 홈 화면에서 "🔧 API 테스트" 카드 터치
2. "🏥 헬스 체크" 버튼 클릭
   ✅ 예상 결과: {"status": "healthy", "message": "SAJU API is running"}
   ❌ 실패 시: "Connection refused" → 백엔드 서버 확인

3. "🔧 API 테스트" 버튼 클릭  
   ✅ 예상 결과: 테스트 엔드포인트 목록 표시
   
4. "🔮 사주 분석" 버튼 클릭
   ✅ 예상 결과: 더미 데이터로 분석 결과 반환

5. "🚀 전체 테스트" 버튼 클릭
   ✅ 예상 결과: 모든 API 순차 호출 성공
```

#### 1.2 오류 상황 테스트
```
1. 백엔드 서버 중단 후 API 테스트
   ✅ 예상 결과: "서버 연결 실패" 에러 메시지
   
2. 잘못된 포트로 연결 시도
   ✅ 예상 결과: 타임아웃 후 에러 처리
```

### **Phase 2: 실제 사주분석 연동 테스트**

#### 2.1 정상 분석 플로우
```
1. 홈 화면에서 "사주팔자 분석" 카드 터치
2. ProfileScreen에서 정보 입력:
   - 생년월일: "1990-05-15"
   - 시간: "14"  
   - 성별: "남자" 선택
   - 이름: "홍길동" (선택사항)

3. "🔮 사주 분석하기" 버튼 터치
   ✅ 예상 결과: 로딩 스피너 표시 → "사주를 분석 중입니다..."

4. 분석 완료 후 결과 확인:
   ✅ 사주팔자: 년/월/일/시주 천간지지 표시
   ✅ 오행 분석: 목/화/토/금/수 강도별 색상 표시  
   ✅ 종합 분석: 성격/건강/재물운/인간관계 텍스트
   ✅ 강점/약점: 개인화된 목록 표시
```

#### 2.2 입력값 검증 테스트
```
1. 빈 필드로 분석 시도
   ✅ 예상 결과: "생년월일을 입력해주세요" 등 검증 메시지

2. 잘못된 날짜 형식 입력
   - 입력: "abc-def-ghi"
   ✅ 예상 결과: "올바른 생년월일 형식을 입력해주세요"

3. 잘못된 시간 입력  
   - 입력: "25시"
   ✅ 예상 결과: "올바른 시간을 입력해주세요"

4. 다양한 날짜 형식 테스트
   ✅ "1990-05-15" → 성공
   ✅ "1990/05/15" → 성공  
   ✅ "1990.05.15" → 성공
   ✅ "19900515" → 성공
```

#### 2.3 UI 인터랙션 테스트
```
1. 사주팔자 4주 8자 표시 확인
   ✅ 년주/월주/일주/시주 정렬 확인
   ✅ 천간/지지 정확한 한자 표시

2. 오행 진행바 테스트
   ✅ 각 오행별 고유 색상 적용
   ✅ 강도에 따른 백분율 표시 (10%-90%)
   ✅ "가장 강한 기운" / "가장 약한 기운" 표시

3. 스크롤 기능 테스트
   ✅ 긴 분석 결과 전체 스크롤 가능
   ✅ 하단 버튼까지 접근 가능
```

### **Phase 3: 확장운세 추가 테스트**

#### 3.1 홈 화면 리뉴얼 확인
```
1. 홈 화면 3단계 구조 확인:
   ✅ 🔮 기본 사주 분석 (2개 카드)
   ✅ ✨ 확장 운세 (8개 카드, 2x4 그리드)  
   ✅ 🤖 AI 도구 (2개 카드)

2. 8개 확장운세 카드 확인:
   Phase 1 (4개):
   ✅ 💕 연애운 (#E91E63)
   ✅ 🎭 성격운 (#9C27B0)  
   ✅ 👥 인간관계운 (#673AB7)
   ✅ 💰 재물운 (#3F51B5)
   
   Phase 2 (4개):
   ✅ 💼 직업운 (#2196F3)
   ✅ 💊 건강운 (#00BCD4)
   ✅ 📚 학업운 (#009688)
   ✅ 👨‍👩‍👧‍👦 가족운 (#4CAF50)

3. Phase 배지 표시 확인
   ✅ 각 카드 우상단에 "Phase 1" 또는 "Phase 2" 표시
```

#### 3.2 인텔리전트 플로우 테스트

##### 시나리오 A: 사주 분석 전 확장운세 접근
```
1. 앱 최초 실행 (사주 분석 이력 없음)
2. 확장운세 카드 아무거나 터치 (예: 💕 연애운)
   ✅ 예상 결과: Alert 메시지 표시
   "사주 분석 필요"
   "확장운세를 보려면 먼저 기본 사주 분석을 해주세요."
   
3. "사주 분석하기" 버튼 선택
   ✅ 예상 결과: ProfileScreen으로 이동

4. 사주 분석 완료 후 홈 화면 복귀
5. 다시 확장운세 카드 터치
   ✅ 예상 결과: 즉시 FortuneDetailScreen 이동
```

##### 시나리오 B: 사주 분석 후 확장운세 접근
```
1. 기본 사주 분석 완료 상태
2. 확장운세 카드 터치 (예: 💼 직업운)
   ✅ 예상 결과: 즉시 FortuneDetailScreen 이동
   ✅ 헤더에 "💼 직업운" 제목 표시
   ✅ 헤더 배경색 #2196F3 적용

3. 로딩 과정 확인
   ✅ ActivityIndicator + "직업운 분석 중..." 메시지
   ✅ 로딩 색상이 직업운 테마색과 일치

4. 분석 결과 표시 확인
   ✅ 5개 세부 항목 카드별 표시:
      - 현재 직업 적성
      - 이직 타이밍  
      - 승진 가능성
      - 스킬 개발
      - 업무 환경
```

#### 3.3 모든 확장운세 순차 테스트
```
각 운세별로 동일한 플로우 테스트:

1. 💕 연애운 (Phase 1)
   ✅ API: /extended-fortune 호출
   ✅ 5개 항목: 현재 연애 상태, 이상적인 파트너, 연애 조언, 연애 타이밍, 궁합 팁

2. 🎭 성격운 (Phase 1)  
   ✅ API: /extended-fortune 호출
   ✅ 5개 항목: 핵심 성격, 숨겨진 특성, 성장 가능성, 사회적 스타일, 스트레스 관리

3. 👥 인간관계운 (Phase 1)
   ✅ API: /extended-fortune 호출
   ✅ 5개 항목: 사회적 호환성, 리더십 스타일, 갈등 해결, 네트워크 확장, 신뢰 구축

4. 💰 재물운 (Phase 1)
   ✅ API: /extended-fortune 호출  
   ✅ 5개 항목: 재물 축적, 투자 성향, 재정 조언, 수입원, 소비 습관

5. 💼 직업운 (Phase 2)
   ✅ API: /extended-fortune-phase2 호출
   ✅ 5개 항목: 현재 직업 적성, 이직 타이밍, 승진 가능성, 스킬 개발, 업무 환경

6. 💊 건강운 (Phase 2)
   ✅ API: /extended-fortune-phase2 호출
   ✅ 5개 항목: 신체 건강, 정신 건강, 질병 예방, 운동 권장사항, 식단 조언

7. 📚 학업운 (Phase 2)  
   ✅ API: /extended-fortune-phase2 호출
   ✅ 5개 항목: 학습 능력, 시험운, 기술 습득, 학업 성취, 지식 활용

8. 👨‍👩‍👧‍👦 가족운 (Phase 2)
   ✅ API: /extended-fortune-phase2 호출
   ✅ 5개 항목: 부모 관계, 형제자매 화합, 자녀 계획, 가족 모임, 세대 갈등
```

---

## 🛠 에러 상황 테스트

### 네트워크 관련 오류
```
1. 오프라인 상태에서 확장운세 접근
   ✅ 예상 결과: "서버 연결에 실패했습니다" 에러 화면
   ✅ "다시 시도" 버튼 동작 확인
   ✅ "돌아가기" 버튼으로 홈 화면 복귀

2. 백엔드 서버 중단 상태에서 테스트
   ✅ 예상 결과: Connection timeout 후 에러 처리
   ✅ 사용자 친화적 메시지 표시

3. API 응답 지연 시뮬레이션
   ✅ 예상 결과: 로딩 상태 최소 2초 이상 표시
   ✅ 사용자가 로딩 상태 인식 가능
```

### 데이터 관련 오류
```
1. 잘못된 사주 정보로 API 호출
   ✅ 예상 결과: "입력된 정보를 처리할 수 없습니다" 메시지
   ✅ ProfileScreen 재분석 안내

2. API 응답 데이터 없음
   ✅ 예상 결과: "분석 결과를 가져올 수 없습니다" 메시지
   ✅ 재시도 옵션 제공

3. 불완전한 API 응답
   ✅ 예상 결과: 있는 데이터만 표시, 없는 항목은 "정보 없음" 표시
```

---

## 📱 UI/UX 품질 테스트

### 반응성 테스트
```
1. 카드 터치 반응성
   ✅ 터치 시 즉시 0.8 투명도 효과
   ✅ 터치 릴리즈 시 원래 상태 복원
   ✅ 터치 영역이 카드 전체에 적용

2. 스크롤 성능
   ✅ 홈 화면 부드러운 스크롤 (60fps)
   ✅ 상세 화면 긴 텍스트 스크롤 끊김 없음
   ✅ 하단 여백 충분히 확보

3. 화면 전환 애니메이션
   ✅ 홈 → 상세 화면 자연스러운 전환
   ✅ 뒒 버튼으로 홈 화면 복귀 smooth
   ✅ 네비게이션 히스토리 정상 작동
```

### 시각적 일관성 테스트
```
1. 색상 일관성
   ✅ 각 운세별 고유 색상 유지
   ✅ Phase 1/2 색상 구분 명확
   ✅ 에러/로딩 상태 색상 적절

2. 타이포그래피
   ✅ 제목/본문/설명 글자 크기 위계 명확
   ✅ 한글 폰트 가독성 양호
   ✅ 줄 간격 적절히 설정

3. 레이아웃 일관성
   ✅ 카드 간격 일정하게 유지
   ✅ 패딩/마진 일관된 적용
   ✅ 모든 화면 동일한 디자인 패턴
```

---

## 🔧 디버깅 가이드

### 일반적인 문제 해결

#### 1. API 연결 실패
```
문제: "Connection refused" 오류
해결:
1. 백엔드 서버 실행 상태 확인: http://localhost:8000/health
2. 포트 충돌 확인: netstat -ano | findstr :8000
3. 방화벽 설정 확인
4. CORS 설정 확인
```

#### 2. 모바일 앱 시작 실패
```
문제: Expo 앱 실행 오류
해결:
1. Node.js 버전 확인: node --version (18+ 필요)
2. 패키지 재설치: rm -rf node_modules && npm install
3. Expo CLI 업데이트: npm install -g @expo/cli
4. 캐시 클리어: npx expo start --clear
```

#### 3. TypeScript 오류
```
문제: 타입 관련 컴파일 오류
해결:
1. 타입 정의 확인: src/types/saju.ts
2. 인터페이스 일치 확인
3. 네비게이션 파라미터 타입 확인: src/navigation/types.ts
```

### 로그 확인 방법
```
1. 백엔드 로그
   - 콘솔에서 API 호출 로그 확인
   - FastAPI 자동 로깅 활용

2. 프론트엔드 로그
   - 브라우저 DevTools Console
   - React Native Debugger
   - console.log() 문 활용

3. 네트워크 로그
   - 브라우저 Network 탭
   - API 요청/응답 상세 확인
```

---

## ✅ 테스트 체크리스트

### Phase 1 (API 연동 기반)
- [ ] 헬스 체크 API 정상 응답
- [ ] API 테스트 도구 모든 버튼 동작
- [ ] 네트워크 오류 상황 적절한 처리
- [ ] 타입 안전성 컴파일 타임 확인

### Phase 2 (실제 사주분석 연동)  
- [ ] 정상 사주 분석 플로우 완료
- [ ] 사주팔자 정확한 표시 (4주 8자)
- [ ] 오행 분석 시각적 표현 (색상+백분율)
- [ ] 종합 분석 결과 완전한 표시
- [ ] 입력값 검증 모든 케이스 처리
- [ ] 로딩/에러 상태 사용자 친화적 표시

### Phase 3 (확장운세 추가)
- [ ] 홈 화면 3단계 구조 정상 표시
- [ ] 8개 확장운세 카드 모두 정상 동작
- [ ] Phase 1/2 자동 구분 API 호출
- [ ] 사주 분석 전/후 인텔리전트 플로우
- [ ] 모든 확장운세 상세 분석 표시
- [ ] 40개 세부 항목 (8운세 × 5항목) 완전 표시

### 전체 품질
- [ ] 모든 화면 부드러운 스크롤
- [ ] 터치 반응성 즉시 피드백
- [ ] 에러 상황 100% 처리
- [ ] 타입 안전성 컴파일 통과
- [ ] 일관된 디자인 시스템 적용
- [ ] 직관적인 사용자 경험

---

## 🎊 테스트 완료 기준

### 모든 항목 ✅ 통과 시
**AppService Phase 1-3 완전 성공!**

1. **API 연동**: SAJU 백엔드와 100% 호환
2. **실제 분석**: 더미 데이터 없음, 모든 분석 결과 실제 API 기반
3. **확장 기능**: 8개 확장운세 + 40개 세부 항목 완전 구현
4. **사용자 경험**: 직관적이고 전문적인 모바일 사주 앱

### 다음 단계
- **Phase 4**: AI 채팅 기능 고도화 (선택사항)
- **Phase 5**: 고급 기능 및 최적화 (선택사항)
- **배포**: App Store / Google Play 배포 준비

**완벽한 모바일 사주 분석 앱 완성! 🚀**